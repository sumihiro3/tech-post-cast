# 番組生成の流れ

以下では、それぞれの処理内容を簡単に説明いたします。

## 解説

### 4-1. 番組で取り上げる記事のピックアップ

Qiita では [Qiita API](https://qiita.com/api/v2/docs) が提供されており、こちらを利用しています。
API にある [投稿エンドポイント](https://qiita.com/api/v2/docs#%E6%8A%95%E7%A8%BF) を使って、投稿日やいいね数を基にして番組で取り上げる話題の記事をピックアップしています。

### 4-2. ピックアップした記事の要約

ピックアップした各記事の本文を OpenAI API を使って要約しています。
要約文があまりにも長くなっては困るので、最小文字数と最大文字数をプロンプトで指定して要約を実行しています。

### 4-3. 番組台本の生成

先に書いた番組 MC のキャラクター設定に加え、番組の構成や出力方式を指示するプロンプトを使って台本を OpenAI API を使って生成しています。
ここはかなり苦労している箇所で、ここのプロンプトの調整に一番時間がかかったと思います。

#### イントロ部分

番組イントロ部分生成では以下のポイントを指示しています。

- 番組冒頭での挨拶文を具体的に指示
- プロンプトで指定する今日の日付に応じた季節の雑談を入れること
- 番組の概要をイントロ部分で伝えること
- 番組で紹介する記事数を台本に加えること

#### 記事の紹介

ここが一番苦戦しているポイントです。
